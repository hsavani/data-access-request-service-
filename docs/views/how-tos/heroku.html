{% extends 'layout.html' %}

{% block pageTitle %}
  How to publish to Heroku - NHS.UK prototype kit
{% endblock %}

{% block beforeContent %}
  {% include "how-tos/includes/breadcrumb.html" %}
{% endblock %}

{% block content %}
  <div class="nhsuk-grid-row">

    <div class="nhsuk-grid-column-two-thirds">

      <h1>
        How to publish to Heroku
      </h1>

      <p><a href="https://www.heroku.com">Heroku</a> allows you to get your prototype online quickly. You can then share your prototype with others and test it with users and on different devices.</p>

      <div class="nhsuk-inset-text">
        <p><strong>DO NOT</strong> enter real user data into prototypes hosted on Heroku. If your prototype stores or collects user data, talk to a security professional about appropriate security steps you must take.</p>
      </div>

      <p>A prototype deployed on Heroku is called an app.</p>

      <h2 id="setup-git">1. Setup Git</h2>

      <p>Before you can use Heroku, you need to <a href="/docs/how-tos/git">set up Git</a> on your prototype.</p>

      <h2 id="sign-up-heroku">2. Sign up to Heroku</h2>

      <p>If youâ€™re new to Heroku, <a href="https://signup.heroku.com/" target="_blank">sign up for a free account (opens in new window)</a>. When asked what language you use, select <code class="app-code">node.js</code>.</p>

      <h2 id="install-heroku">3. Install the Heroku toolbelt</h2>

      <p>Install the <a href="https://toolbelt.heroku.com/" target="_blank">Heroku toolbelt (opens in new window)</a>.</p>

      <p>The toolbelt lets you use Heroku through the terminal. You will need to restart the terminal after installing the toolbelt.</p>

      <h2 id="login-heroku">4. Login to Heroku</h2>

      <p>Log into your Heroku account by running:</p>

      <pre class="app-pre"><code class="app-code">heroku login</code></pre>

      <h2 id="choose-app-name">5. Choose a name for your app</h2>

      <p>You need a unique name for your app. The name is used in the url for your prototype. For example the name:</p>

      <p><code class="app-code">nhsuk-medicines-prototype</code></p>

      <p>will create an app at:</p>

      <p><code class="app-code">nhsuk-medicines-prototype.herokuapp.com</code></p>

      <h2 id="create-app">6. Create your app</h2>

      <p>To create your app, enter in the terminal:</p>

      <pre class="app-pre"><code class="app-code">heroku apps:create [name of your app] --region eu</code></pre>

      <p>Replace <code class="app-code">[name of your app]</code> with your app name from step 5.</p>

      <h2 id="set-app-user-password">7. Set a username and password</h2>

      <div class="nhsuk-inset-text">
        <p>Prototypes made with the kit require a username and password when published online. This stops members of the public coming across your prototype by accident.</p>
      </div>

      <h3 class="nhsuk-heading-xs">To set username:</h3>

      <pre class="app-pre nhsuk-u-margin-bottom-4"><code class="app-code">heroku config:set PROTOTYPE_USERNAME=username_here --app [name of your app]</code></pre>

      <h3 class="nhsuk-heading-xs">To set password:</h3>
      
      <pre class="app-pre nhsuk-u-margin-bottom-7"><code class="app-code">heroku config:set PROTOTYPE_PASSWORD=password_here --app [name of your app]</code></pre>

      <h2 id="deploy-app">8. Deploy your changes</h2>

      <p>Make sure any changes you've made to your prototype have been committed to git.</p>

      <pre class="app-pre"><code class="app-code">git add .<br>git commit -m "your commit message here"</code></pre>

      <p>Then push your work to Heroku:</p>

      <pre class="app-pre"><code class="app-code">git push heroku master</code></pre>
      
      <p>Deploying may take a minute or so.</p>

      <h2 id="view-app-online">9. View your prototype online</h2>

      <p>After your work is deployed, you will be able to view it on the web by visiting <code class="app-code">[name].herokuapp.com</code>.</p>
      <p>You can also open your prototype in a browser by running:</p>
      <pre class="app-pre"><code class="app-code">heroku open</code></pre>

      {% include "how-tos/includes/back-button.html" %}

    </div>

  </div>
{% endblock %}
